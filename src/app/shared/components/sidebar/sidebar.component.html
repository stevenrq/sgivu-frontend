<div class="sidebar-wrapper">
  @if (isMobileView) {
    <button
      type="button"
      class="sidebar-toggle btn btn-outline-primary d-lg-none"
      (click)="toggleSidebar()"
      aria-label="Abrir menú lateral"
      [attr.aria-expanded]="isSidebarOpen"
      aria-controls="appSidebar"
    >
      <i
        class="bi"
        [class.bi-list]="!isSidebarOpen"
        [class.bi-x-lg]="isSidebarOpen"
      ></i>
      <span class="sidebar-toggle-label">
        {{ isSidebarOpen ? 'Cerrar' : 'Menú' }}
      </span>
    </button>
  }

  @if (isMobileView) {
    <div
      class="sidebar-backdrop"
      [class.show]="isSidebarOpen"
      (click)="closeSidebar()"
    ></div>
  }

  <nav
    id="appSidebar"
    class="sidebar"
    [class.sidebar-open]="isSidebarOpen || !isMobileView"
    aria-label="Navegación principal"
    [attr.aria-hidden]="!isSidebarOpen && isMobileView ? true : null"
  >
    <a
      href="/dashboard"
      class="sidebar-brand text-center"
      (click)="handleNavigation()"
    >
      <i class="bi bi-archive"></i>
    </a>
    <ul class="nav flex-column">
      <li class="nav-item" routerLinkActive="active">
        <a
          class="nav-link"
          aria-current="page"
          routerLink="/dashboard"
          (click)="handleNavigation()"
        >
          <i class="bi bi-grid-1x2-fill"></i>Panel
        </a>
      </li>

      <li class="nav-item" routerLinkActive="active">
        <a class="nav-link" routerLink="/vehicles" (click)="handleNavigation()">
          <i class="bi bi-car-front-fill"></i>Vehículos
        </a>
      </li>

      <li class="nav-item" routerLinkActive="active">
        <a
          class="nav-link"
          routerLink="/purchase-sales"
          (click)="handleNavigation()"
        >
          <i class="bi bi-receipt"></i>Compras y Ventas
        </a>
      </li>

      <li class="nav-item" routerLinkActive="active">
        <a class="nav-link" routerLink="/clients" (click)="handleNavigation()">
          <i class="bi bi-people-fill"></i>Clientes
        </a>
      </li>

      <li class="nav-item" routerLinkActive="active">
        <a class="nav-link" routerLink="/reports" (click)="handleNavigation()">
          <i class="bi bi-file-earmark-bar-graph-fill"></i>Reportes
        </a>
      </li>

      <li class="nav-item" routerLinkActive="active">
        <a
          class="nav-link"
          routerLink="/maintenance"
          (click)="handleNavigation()"
        >
          <i class="bi bi-tools"></i>Mantenimiento
        </a>
      </li>

      <li class="nav-item" routerLinkActive="active">
        <a class="nav-link" routerLink="/users" (click)="handleNavigation()">
          <i class="bi bi-person-badge-fill"></i>Usuarios
        </a>
      </li>

      <li class="nav-item mt-auto" routerLinkActive="active">
        <a class="nav-link" routerLink="/settings" (click)="handleNavigation()">
          <i class="bi bi-gear-fill"></i>Configuración
        </a>
      </li>

      <li class="nav-item mt-auto" routerLinkActive="active">
        <a
          class="nav-link"
          routerLink="/roles-permissions"
          (click)="handleNavigation()"
        >
          <i class="bi bi-shield-lock"></i>Roles y Permisos
        </a>
      </li>
    </ul>
  </nav>
</div>
